openapi: 3.0.1
info:
  title: SROOM 프로젝트
  description: RESTful API
  version: v1.0.0
servers:
  - url: http://localhost:8080
    description: Generated server url
paths:
  /members/refresh:
    post:
      tags:
        - 로그인
      summary: access token 갱신
      description: refresh token을 사용하여 로그인을 유지합니다.
      operationId: refresh
      requestBody:
        content:
          application/json;charset=UTF-8:
            schema:
              $ref: '#/components/schemas/RefreshToken'
        required: true
      responses:
        "404":
          description: Not Found
          content:
            application/json;charset=UTF-8:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        "401":
          description: Unauthorized
          content:
            application/json;charset=UTF-8:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        "400":
          description: Bad Request
          content:
            application/json;charset=UTF-8:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        "200":
          description: 토큰 갱신에 성공하였습니다.
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/Login'
  /members/login:
    post:
      tags:
        - 로그인
      summary: 사용자 로그인
      description: 구글 ID 키를 사용하여 사용자를 인증합니다.
      operationId: login
      requestBody:
        content:
          application/json;charset=UTF-8:
            schema:
              $ref: '#/components/schemas/GoogleIdKey'
        required: true
      responses:
        "404":
          description: Not Found
          content:
            application/json;charset=UTF-8:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        "401":
          description: 인증에 실패하였습니다.
          content: {}
        "400":
          description: 요청 본문이 유효하지 않습니다.
          content: {}
        "200":
          description: 성공적으로 사용자를 인증하였습니다.
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/Login'
  /courses:
    get:
      tags:
        - 내 강의실
      summary: 내 강의코스 불러오기
      description: 멤버ID를 입력받아 멤버의 등록 코스 리스트와 관련 정보를 불러옵니다.
      operationId: getMyCourses
      responses:
        "404":
          description: Not Found
          content:
            application/json;charset=UTF-8:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        "401":
          description: Unauthorized
          content:
            application/json;charset=UTF-8:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        "400":
          description: Bad Request
          content:
            application/json;charset=UTF-8:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        "200":
          description: 성공적으로 코스 리스트를 불러왔습니다.
          content:
            application/json;charset=UTF-8:
              schema:
                $ref: '#/components/schemas/MyCourses'
    post:
      tags:
        - 강의 등록
      summary: 강의 신규 등록
      description: 강의코드를 입력받아 코스를 생성합니다.
      operationId: enrollCourse
      parameters:
        - name: use_schedule
          in: query
          required: true
          schema:
            type: boolean
      requestBody:
        content:
          application/json;charset=UTF-8:
            schema:
              $ref: '#/components/schemas/NewLecture'
        required: true
      responses:
        "404":
          description: Not Found
          content:
            application/json;charset=UTF-8:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        "401":
          description: Unauthorized
          content:
            application/json;charset=UTF-8:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        "400":
          description: Bad Request
          content:
            application/json;charset=UTF-8:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        "200":
          description: 성공적으로 강의 코스를 등록하였습니다.
          content:
            application/json;charset=UTF-8:
              schema:
                $ref: '#/components/schemas/EnrolledCourseInfo'
  /courses/{courseId}:
    post:
      tags:
        - 강의 등록
      summary: 기존 코스 강의 등록
      description: 강의코드와 코스ID를 받아 코스에 추가합니다.
      operationId: addLectureInCourse
      parameters:
        - name: courseId
          in: path
          required: true
          schema:
            type: integer
            format: int64
      requestBody:
        content:
          application/json;charset=UTF-8:
            schema:
              $ref: '#/components/schemas/NewLecture'
        required: true
      responses:
        "404":
          description: Not Found
          content:
            application/json;charset=UTF-8:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        "401":
          description: Unauthorized
          content:
            application/json;charset=UTF-8:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        "400":
          description: Bad Request
          content:
            application/json;charset=UTF-8:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        "200":
          description: 성공적으로 코스에 강의를 추가하였습니다.
          content:
            application/json;charset=UTF-8:
              schema:
                $ref: '#/components/schemas/EnrolledCourseInfo'
  /lectures:
    get:
      tags:
        - 강의 검색
      summary: 강의 키워드 검색
      description: 키워드를 입력받아 유튜브 강의를 검색한다.
      operationId: getLecturesByKeyword
      parameters:
        - name: keywordSearchParam
          in: query
          required: true
          schema:
            $ref: '#/components/schemas/KeywordSearchParam'
        - name: keyword
          in: query
          description: 검색할 키워드
          required: true
          example: 네트워크
        - name: limit
          in: query
          description: 결과의 최대 개수
          example: 5
        - name: filter
          in: query
          description: "검색 종류 필터, all, playlist, video"
          example: all
        - name: nextPageToken
          in: query
          description: 다음 페이지 토큰
          example: QAUQAA
        - name: prevPageToken
          in: query
          description: 이전 페이지 토큰
          example: CAUQAA
      responses:
        "404":
          description: Not Found
          content:
            application/json;charset=UTF-8:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        "401":
          description: Unauthorized
          content:
            application/json;charset=UTF-8:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        "400":
          description: Bad Request
          content:
            application/json;charset=UTF-8:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        "200":
          description: 성공적으로 검색 결과를 반환하였습니다.
          content:
            application/json;charset=UTF-8:
              schema:
                $ref: '#/components/schemas/KeywordSearch'
  /lectures/{lectureCode}:
    get:
      tags:
        - 강의 검색
      summary: 강의 상세 정보 조회
      description: 강의 ID를 이용하여 강의의 상세 정보를 조회한다.
      operationId: getLectureDetail
      parameters:
        - name: lectureCode
          in: path
          description: 강의 코드
          required: true
          schema:
            type: string
          example: OEV8gMkCHXQ
        - name: lectureDetailParam
          in: query
          required: true
          schema:
            $ref: '#/components/schemas/LectureDetailParam'
        - name: index_only
          in: query
          description: 목차만 응답 여부
          example: false
        - name: review_only
          in: query
          description: 후기만 응답 여부
          example: false
        - name: index_limit
          in: query
          description: 결과의 최대 개수
          example: 50
        - name: review_limit
          in: query
          description: 후기의 최대 개수
          example: 10
        - name: index_next_token
          in: query
          description: 목차 다음 페이지 토큰
          example: EAAaBlBUOkNESQ
      responses:
        "404":
          description: Not Found
          content:
            application/json;charset=UTF-8:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        "401":
          description: Unauthorized
          content:
            application/json;charset=UTF-8:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        "400":
          description: Bad Request
          content:
            application/json;charset=UTF-8:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        "200":
          description: 성공적으로 강의 상세 정보를 반환하였습니다.
          content:
            application/json:
              schema:
                oneOf:
                  - $ref: '#/components/schemas/PlaylistDetail'
                  - $ref: '#/components/schemas/VideoDetail'
                  - $ref: '#/components/schemas/IndexInfo'
  /lectures/recommendations:
    get:
      tags:
        - 강의 검색
      summary: 강의 추천
      description: 유저 ID를 받아 적당한 강의를 추천한다.
      operationId: getRecommendations
      responses:
        "404":
          description: Not Found
          content:
            application/json;charset=UTF-8:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        "401":
          description: Unauthorized
          content:
            application/json;charset=UTF-8:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        "400":
          description: Bad Request
          content:
            application/json;charset=UTF-8:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        "200":
          description: 성공적으로 추천 결과를 반환하였습니다.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Recommendations'
  /dashboards:
    get:
      tags:
        - 대시보드
      summary: 대시보드 불러오기
      description: 유저 ID 바탕으로 대시보드 정보 불러오기
      operationId: getDashboard
      responses:
        "404":
          description: Not Found
          content:
            application/json;charset=UTF-8:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        "401":
          description: Unauthorized
          content:
            application/json;charset=UTF-8:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        "400":
          description: Bad Request
          content:
            application/json;charset=UTF-8:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        "200":
          description: 성공적으로 대시보드를 반환하였습니다.
          content:
            application/json;charset=UTF-8:
              schema:
                $ref: '#/components/schemas/Dashboard'
components:
  schemas:
    ErrorResponse:
      type: object
      properties:
        statusCode:
          type: integer
          format: int32
        message:
          type: string
    RefreshToken:
      type: object
      properties:
        refreshToken:
          type: string
          description: 리프레시 토큰
          example: eyJhbGci...
      description: 리프레시 토큰
    Login:
      type: object
      properties:
        accessToken:
          type: string
          description: 엑세스 토큰
          example: eyJhbGci...
        refreshToken:
          type: string
          description: 리프레시 토큰
          example: eyJhbGci...
        expiresAt:
          type: integer
          description: 만료 시간(초)
          format: int64
          example: 1688398507
        name:
          type: string
          description: 멤버 이름
          example: user_978538
        bio:
          type: string
          description: 사용자 한줄소개
      description: 로그인 정보
    GoogleIdKey:
      type: object
      properties:
        credential:
          type: string
          description: 구글 ID 토큰
          example: eyJhbGciOiJSUzI1NiIsImtpZCI6Ijk5YmNiMDY5MzQwYTNmMTQ3NDYyNzk0ZGZlZmE3NWU3OTk2MTM2MzQiLCJ0eXAiOiJKV1QifQ.eyJpc3MiOiJodHRwczovL2FjY291bnRzLmdvb2dsZS5jb20iLCJuYmYiOjE2ODgyMTkyODAsImF1ZCI6IjEwODUyMjEwNDc5NDYtNHMxZ2YwZjlqdHQ3OTB2a2ZkcHZ1Z3FqbW9qMzdrdGsuYXBwcy5nb29nbGV1c2VyY29udGVudC5jb20iLCJzdWIiOiIxMDYwMzMxMTQ0MzU1MjY2MTA0ODciLCJlbWFpbCI6ImxqanVuMDcwMkBnbWFpbC5jA0Nzk0Ni00czFnZjBmOWp0dDc5MHZrZmRwdnVncWptb2ozN2t0ay5hcHBzLmdvb2dsZXVzZXJjb250ZW50LmNvbSIsIm5hbWUiOiLsnbTsooXspIAiLCJwaWN0dXJlIjoiaHR0cHM6Ly9saDMuZ29vZ2xldXNlcmNvbnRlbnQuY29tL2EvQUF=NLQmhRemdtZnNMdXpJVEhNS081bHNnN3FrPXM5Ni1jIiwiZ2l2ZW5fbmFtZSI6IuyiheykgCIsImZhbWlseV9uYW1lIjoi7J20IiwiaWF0IjoxNjg4MjE5NTgwLCJleHAiOjE2ODgyMjMxODAsImp0aSI6kNmVmNmMyM2JlZDgifQ.U1zcrnD9T9tnq2boIRZ9m37fVqeq25elAyBtghKG1p4mzbI1VoygbzdbyYihUkIVz8I21EDiiny9pO8ZBh7_pfSVHXok2XWPtWtzp3SHFKwePhW-SD0HAh8vDPJrkGCiQj5CupAL5nIs-GlIfusC7rx9A1hHaxu-CNyuEDlqrHh-MHlQLN4Wp42RfptOf68cIZZvKQ9D-Fx7Ag6F3Ot8Wfq5yZA
      description: 구글 ID 토큰
    NewLecture:
      required:
        - lectureCode
      type: object
      properties:
        lectureCode:
          type: string
          description: 강의 코드
          example: PL0d8NnikouEWcF1jJueLdjRIC4HsUlULi
        dailyTargetTime:
          type: integer
          description: 일일 목표 시간
          format: int32
          example: 120
        scheduling:
          type: array
          description: 강의 스케줄
          example:
            - 1
            - 2
            - 3
            - 4
            - 5
          items:
            type: integer
            description: 강의 스케줄
            format: int32
        expectedEndTime:
          type: string
          description: 예상 종료 시간
          example: 2023-12-31
      description: 새로운 강의 정보
    EnrolledCourseInfo:
      type: object
      properties:
        courseId:
          type: integer
          description: 등록된 코스 번호
          format: int64
          example: 12
        lectureId:
          type: integer
          description: 등록된 강의 번호
          format: int64
          example: 44
        title:
          type: string
          description: 등록된 강의 제목
          example: 손경식의 맥북프로 언박싱
      description: 등록된 코스 정보
    KeywordSearchParam:
      required:
        - keyword
      type: object
      properties:
        keyword:
          type: string
        next_page_token:
          type: string
        limit:
          type: integer
          format: int32
        filter:
          type: string
    KeywordSearch:
      type: object
      properties:
        resultPerPage:
          type: integer
          description: 응답 개수
          format: int32
          example: 5
        nextPageToken:
          type: string
          description: 다음페이지 조회 토큰
          example: CAQQAA
        prevPageToken:
          type: string
          description: 이전페이지 조회 토큰
          example: QAQQAA
        lectures:
          type: array
          description: 조회된 강의 리스트
          items:
            $ref: '#/components/schemas/Lecture'
      description: 검색 결과 강의 리스트
    Lecture:
      type: object
      properties:
        lectureTitle:
          type: string
          description: 강의 제목
          example: 네트워크 기초(개정판)
        description:
          type: string
          description: 강의 설명
          example: OSI 7계층에서 각 계층의 다양한 프로토콜들을 통해서 배우는 네트워크 기초에 대한 강의입니다.
        channel:
          type: string
          description: 채널
          example: 따라하면서 배우는 IT
        lectureCode:
          type: string
          description: 강의 ID
          example: PL0d8NnikouEWcF1jJueLdjRIC4HsUlULi
        rating:
          type: number
          description: 강의 평점
          format: double
          example: 4.3
        reviewCount:
          type: integer
          description: 후기 개수
          format: int32
          example: 44
        thumbnail:
          type: string
          description: 강의 썸네일
          example: https://i.ytimg.com/vi/Av9UFzl_wis/hqdefault.jpg
        lectureCount:
          type: integer
          description: 강의 개수
          format: int32
          example: 11
        viewCount:
          type: integer
          description: 조회수
          format: int64
          example: 1222222
        publishedAt:
          type: string
          description: 생성일
          example: 2022-05-23 10:30:21
        is_enrolled:
          type: boolean
          description: 강의 등록 여부
          example: false
        is_playlist:
          type: boolean
          description: 플레이리스트 여부
          example: true
      description: 검색된 개별 강의 정보
    LectureDetailParam:
      type: object
      properties:
        index_only:
          type: boolean
        index_limit:
          type: integer
          format: int32
        index_next_token:
          type: string
        review_only:
          type: boolean
        review_offset:
          type: integer
          format: int32
        review_limit:
          type: integer
          format: int32
    CourseBrief:
      type: object
      properties:
        courseId:
          type: integer
          description: 코스 ID
          format: int64
          example: 44
        title:
          type: string
          description: 코스 제목
          example: 침착맨 vs 주호민 산다면 누구 인생으로?
        videoCount:
          type: integer
          description: 코스에 해당하는 영상 개수
          format: int32
          example: 111
      description: 멤버의 코스 리스트
    Index:
      type: object
      properties:
        index:
          type: integer
          description: 목차 번호
          format: int32
          example: 1
        thumbnail:
          type: string
          description: 강의 썸네일
          example: https://i.ytimg.com/vi/Av9UFzl_wis/hqdefault.jpg
        lectureTitle:
          type: string
          description: 강의 제목
          example: 네트워크 기초(개정판)
        duration:
          type: integer
          description: 영상 길이
          format: int32
      description: 재생목록 목차 정보
    IndexInfo:
      type: object
      properties:
        indexList:
          type: array
          description: 목차 리스트
          items:
            $ref: '#/components/schemas/Index'
        nextPageToken:
          type: string
          description: 다음 페이지 토큰
          example: EAAaBlBUOkNBbw
        totalDuration:
          type: integer
          description: 총 재생 시간
          format: int32
          example: 245212
      description: 목차 정보
    PlaylistDetail:
      type: object
      properties:
        lectureCode:
          type: string
          description: 재생목록 ID
          example: PL0d8NnikouEWcF1jJueLdjRIC4HsUlULi
        lectureTitle:
          type: string
          description: 재생목록 제목
          example: 네트워크 기초(개정판)
        channel:
          type: string
          description: 채널 이름
          example: Network Academy
        description:
          type: string
          description: 재생목록 설명
          example: OSI 7계층에서 각 계층의 다양한 프로토콜들을 통해서 배우는 네트워크 기초에 대한 강의입니다.
        publishedAt:
          type: string
          description: 재생목록 게시 날짜
          example: 2022-12-31T23:59:59Z
        lectureCount:
          type: integer
          description: 강의 개수
          format: int32
          example: 20
        rating:
          type: number
          description: 강의 평점
          format: double
          example: 4.3
        reviewCount:
          type: integer
          description: 후기 개수
          format: int32
          example: 44
        thumbnail:
          type: string
          description: 재생목록 썸네일
          example: https://i.ytimg.com/vi/Av9UFzl_wis/hqdefault.jpg
        indexes:
          $ref: '#/components/schemas/IndexInfo'
        reviews:
          type: array
          description: 강의 후기 요약 정보
          items:
            $ref: '#/components/schemas/ReviewBrief'
        courses:
          type: array
          description: 멤버의 코스 리스트
          items:
            $ref: '#/components/schemas/CourseBrief'
        is_enrolled:
          type: boolean
          description: 강의 등록 여부
          example: false
        is_playlist:
          type: boolean
          description: 플레이리스트 여부
          example: true
      description: 재생목록 상세 정보
    ReviewBrief:
      type: object
      properties:
        index:
          type: integer
          description: 순서
          format: int32
          example: 1
        reviewContent:
          type: string
          description: 후기 내용
          example: 발음을 못알아먹것서요~
        submittedRating:
          type: integer
          description: 별점
          format: int32
          example: 2
        reviewerName:
          type: string
          description: 후기 남긴 사람 이름
          example: user_318593
        publishedAt:
          type: string
          description: 후기 생성 날짜
          example: 2022-01-34
      description: 후기 정보
    VideoDetail:
      type: object
      properties:
        lectureCode:
          type: string
          description: 강의 ID
          example: OEV8gMkCHXQ
        lectureTitle:
          type: string
          description: 강의 제목
          example: 네트워크 기초(개정판)
        channel:
          type: string
          description: 채널 이름
          example: OpenAI
        description:
          type: string
          description: 강의 설명
          example: OSI 7계층에서 각 계층의 다양한 프로토콜들을 통해서 배우는 네트워크 기초에 대한 강의입니다.
        duration:
          type: integer
          description: 강의 재생 길이
          format: int32
          example: 11424
        enrolled:
          type: boolean
          description: 강의 등록 여부
          example: false
        playlist:
          type: boolean
          description: 플레이리스트 여부
          example: false
        viewCount:
          type: integer
          description: 조회 수
          format: int64
          example: 10234
        publishedAt:
          type: string
          description: 게시일
          example: 2023-06-28
        rating:
          type: number
          description: 강의 평점
          format: double
          example: 4.3
        reviewCount:
          type: integer
          description: 후기 개수
          format: int32
          example: 44
        thumbnail:
          type: string
          description: 강의 썸네일
          example: https://i.ytimg.com/vi/OEV8gMkCHXQ/maxresdefault.jpg
        reviews:
          type: array
          description: 강의 리뷰 목록
          items:
            $ref: '#/components/schemas/ReviewBrief'
        courses:
          type: array
          description: 멤버의 코스 리스트
          items:
            $ref: '#/components/schemas/CourseBrief'
      description: 동영상 상세 정보
    RecommendLecture:
      type: object
      properties:
        lectureTitle:
          type: string
          description: 강의 제목
        description:
          type: string
          description: 강의 설명
        channel:
          type: string
          description: 채널
        lectureCode:
          type: string
          description: 강의 ID
        rating:
          type: number
          description: 강의 평점
          format: double
        reviewCount:
          type: integer
          description: 리뷰 개수
          format: int32
        thumbnail:
          type: string
          description: 썸네일
        is_playlist:
          type: boolean
          description: 플레이리스트 여부
      description: 추천 강의 정보
    Recommendations:
      type: object
      properties:
        recommendations:
          type: array
          description: 추천 강의 리스트
          items:
            $ref: '#/components/schemas/RecommendLecture'
      description: 강의 추천 리스트
    CourseInfo:
      type: object
      properties:
        courseId:
          type: integer
          description: 코스 ID
          format: int64
        courseTitle:
          type: string
          description: 코스 제목 - 첫 영상 제목
        thumbnail:
          type: string
          description: 썸네일
        channels:
          type: string
          description: 채널 리스트
        totalVideoCount:
          type: integer
          description: 코스 내 영상 갯수
          format: int32
        completedVideoCount:
          type: integer
          description: 수강 완료 영상 갯수
          format: int32
        duration:
          type: integer
          description: 코스 총 재생 시간
          format: int32
        progress:
          type: integer
          description: 수강률
          format: int32
        lastViewTime:
          type: string
          description: 마지막 수강 시간
      description: 강의 코스 정보
    Dashboard:
      type: object
      properties:
        correctnessRate:
          type: integer
          description: 퀴즈 정답률
          format: int32
        completionRate:
          type: integer
          description: 완강률
          format: int32
        totalLearningTime:
          type: integer
          description: 전체 누적수강 시간
          format: int32
        motivation:
          type: string
          description: 동기부여 문구
        latestLectures:
          type: array
          description: 최근 수강 강의
          items:
            $ref: '#/components/schemas/CourseInfo'
        learningHistories:
          type: array
          description: 일별 수강 로그
          items:
            $ref: '#/components/schemas/LearningHistory'
      description: 대시보드 반환 데이터
    LearningHistory:
      type: object
      properties:
        date:
          type: string
          description: 날짜
        learningTime:
          type: integer
          description: 수강 시간
          format: int32
        quizCount:
          type: integer
          description: 일일 퀴즈 푼 갯수
          format: int32
        lectureCount:
          type: integer
          description: 일일 수강 강의 갯수
          format: int32
      description: 일일 수강 로그
    MyCourses:
      type: object
      properties:
        unfinishedCourse:
          type: integer
          description: 미 수강완료 강의 갯수
          format: int32
        completionRate:
          type: integer
          description: 완강률
          format: int32
        courses:
          type: array
          description: 강의 코스 데이터 리스트
          items:
            $ref: '#/components/schemas/CourseInfo'
      description: 내 강의실 데이터
